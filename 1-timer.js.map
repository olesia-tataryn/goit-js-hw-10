{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst timerInput = document.querySelector('#datetime-picker');\nconst button = document.querySelector('.datetime-button');\nbutton.disabled = true;\n\nconst daySpan = document.querySelector('[data-days]');\nconst hourSpan = document.querySelector('[data-hours]');\nconst minuteSpan = document.querySelector('[data-minutes]');\nconst secondSpan = document.querySelector('[data-seconds]');\n\nlet timerId = null;\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (selectedDate <= new Date()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      button.disabled = true;\n    } else {\n      userSelectedDate = selectedDate;\n      button.disabled = false;\n    }\n  }\n};\n\nflatpickr(timerInput, options);\n\nbutton.addEventListener('click', () => {\n  button.disabled = true;\n  timerInput.disabled = true;\n  startTimer(userSelectedDate);\n});\n\nfunction setTimerDisplay ({days, hours, minutes, seconds}) {\n  daySpan.textContent = String(days).padStart(2, '0');\n  hourSpan.textContent = String(hours).padStart(2, '0');\n  minuteSpan.textContent = String(minutes).padStart(2, '0');\n  secondSpan.textContent = String(seconds).padStart(2, '0');\n};\n\nfunction startTimer (userSelectedDate){\n  timerId = setInterval(() => {\n    const currentDate = new Date();\n    const dateDiff = userSelectedDate - currentDate;\n    if (dateDiff < 1000) {\n      setTimerDisplay({\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n      });\n      timerInput.disabled = false;\n      button.disabled = true;\n      clearInterval(timerId);\n      return;\n    }\n    const timeleft = convertMs(dateDiff);\n    setTimerDisplay (timeleft);\n  }, 1000);\n};\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n};\n\n\n\n\n"],"names":["timerInput","button","daySpan","hourSpan","minuteSpan","secondSpan","timerId","userSelectedDate","options","selectedDates","selectedDate","iziToast","flatpickr","startTimer","setTimerDisplay","days","hours","minutes","seconds","dateDiff","timeleft","convertMs","ms"],"mappings":"0IAMA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAS,SAAS,cAAc,kBAAkB,EACxDA,EAAO,SAAW,GAElB,MAAMC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,cAAc,gBAAgB,EACpDC,EAAa,SAAS,cAAc,gBAAgB,EAE1D,IAAIC,EAAU,KACVC,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACtBC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAClB,CAAO,EACDV,EAAO,SAAW,KAElBM,EAAmBG,EACnBT,EAAO,SAAW,GAErB,CACH,EAEAW,EAAUZ,EAAYQ,CAAO,EAE7BP,EAAO,iBAAiB,QAAS,IAAM,CACrCA,EAAO,SAAW,GAClBD,EAAW,SAAW,GACtBa,EAAWN,CAAgB,CAC7B,CAAC,EAED,SAASO,EAAiB,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACzDhB,EAAQ,YAAc,OAAOa,CAAI,EAAE,SAAS,EAAG,GAAG,EAClDZ,EAAS,YAAc,OAAOa,CAAK,EAAE,SAAS,EAAG,GAAG,EACpDZ,EAAW,YAAc,OAAOa,CAAO,EAAE,SAAS,EAAG,GAAG,EACxDZ,EAAW,YAAc,OAAOa,CAAO,EAAE,SAAS,EAAG,GAAG,CAC1D,CAEA,SAASL,EAAYN,EAAiB,CACpCD,EAAU,YAAY,IAAM,CAE1B,MAAMa,EAAWZ,EADG,IAAI,KAExB,GAAIY,EAAW,IAAM,CACnBL,EAAgB,CACd,KAAM,EACN,MAAO,EACP,QAAS,EACT,QAAS,CACjB,CAAO,EACDd,EAAW,SAAW,GACtBC,EAAO,SAAW,GAClB,cAAcK,CAAO,EACrB,MACD,CACD,MAAMc,EAAWC,EAAUF,CAAQ,EACnCL,EAAiBM,CAAQ,CAC1B,EAAE,GAAI,CACT,CAGA,SAASC,EAAUC,EAAI,CAOrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}